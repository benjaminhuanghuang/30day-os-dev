## 1 窗口切换（1）（harib21a）

按下F11时，将最下面的那个窗口放到最上面

F11的按键编码为0x57（F12为0x58）


## 2 窗口切换（2）（harib21b）

当鼠标点击画面的某个地方时，怎样才能知道鼠标所点击到的是哪个图层呢？
我们需要按照从上到下的顺序，判断鼠标的位置落在哪个图层的范围内，并且还需要确保该位置不是透明色区域。


## 3 移动窗口（harib21c）

当鼠标左键点击窗口时，如果点击位置位于窗口的标题栏区域，则进入“窗口移动模式”，使窗口的位置追随鼠标指针的移动，当放开鼠标左键时，退出“窗口移动模式”，返回通常模式。

要实现窗口的移动，我们需要记录鼠标指针所移动的距离，为此我们添加了两个变量：mmx和mmy,mm是“move mode”的缩写，这两个变量所记录的是移动之前的坐标。

由于鼠标指针不会跑到画面以外，因此我们规定当mmx为负数时代表当前不处于窗口移动模式。


## 4 用鼠标关闭窗口（harib21d）



## 5 将输入切换到应用程序窗口（harib21e）

主要修改的地方是将HariMain中key_to的地方改为key_win，以及添加在输入窗口消失时（被关闭时）进行处理的代码。

我们用SHEET结构中的task成员来判断数据发送对象的FIFO，因此在sht_cons->task中也加入了TASK结构的地址，这样的话我们就无法分辨窗口是不是由应用程序生成的，于是我们需要通过SHEET结构中的flags成员进行判断（以0x10比特位进行区分）。此外，只有命令行窗口需要控制光标的ON/OFF，应用程序窗口不需要，这一区别也是通过flags来进行判断的（以0x20比特位进行区分）。


change key_to to key_win

