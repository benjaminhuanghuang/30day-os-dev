## 1 编写malloc（harib20a）

如果api_malloc只是调用操作系统中的memman_alloc，并将分配到的内存空间地址返回给应用程序的话，是行不通的，因为通过memman_alloc所获得的内存空间并不位于应用程序的数据段范围内，应用程序是无法进行读写操作的

应用程序可以进行读写的只是最开始操作系统为它准备好的数据段中的内存空间而已，那么如果我们一开始就将应用程序用的数据段分配得大一点，当需要malloc的时候从多余的空间里面拿出一小部分来交给应用程序不就好了吗

```
$(BIM2HRB) winhelo2.bim winhelo2.hrb 0
```
当指定了malloc所需内存大小时，这个数值会和栈等的大小进行累加，并写入．hrb文件最开头的4个字节中。因此，操作系统不需要做任何改动，就可以确保在应用程序段中分配到包括malloc所需部分在内的全部内存空间。
同时，malloc用的内存空间在数据段中的开始位置，被保存在．hrb文件的0x0020处。

